<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BCWL Game Desk – Territory & Possession Tracker</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .grid { display: grid; grid-template-columns: repeat(3, 280px); grid-template-rows: repeat(2, 280px); gap: 5px; margin-top: 20px; }
    .zone { background: #cce4f7; border: 2px solid #000; display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 22px; cursor: pointer; }
    .controls, .teams, .direction, .setup { margin-top: 15px; }
    button { padding: 10px 20px; margin: 5px; font-size: 16px; cursor: pointer; }
    #timer, .stats { font-size: 18px; font-weight: bold; margin-top: 10px; }
    .active { background-color: #a6f5a6 !important; }
  </style>
</head>
<body>

<h2>BCWL Game Desk – Possession & Territory Tracker</h2>
<div class="stats" id="liveStats">White Team: Poss 0% | Terr 0% — Dark Team: Poss 0% | Terr 0% — Neutral: 0%</div>

<div class="setup">
  <label>Game Name: <input type="text" id="gameName" placeholder="e.g. Dragons vs Centaurs"></label><br>

  <label>White Team:
    <select id="whiteTeam">
      <option>Tigers</option><option>Lions</option><option>Leopards</option><option>Jaguars</option><option>Caracals</option>
      <option>Barbells</option><option>Gryphons</option><option>Dragons</option><option>Centaurs</option><option>Bullcats</option>
      <option>Kestrels</option><option>Eagles</option><option>Condors</option><option>Falcons</option><option>Ospreys</option>
      <option>Hawks</option><option>Harriers</option><option>Kites</option><option>Vultures</option>
    </select>
  </label><br>

  <label>Dark Team:
    <select id="darkTeam">
      <option>Tigers</option><option>Lions</option><option>Leopards</option><option>Jaguars</option><option>Caracals</option>
      <option>Barbells</option><option>Gryphons</option><option>Dragons</option><option>Centaurs</option><option>Bullcats</option>
      <option>Kestrels</option><option>Eagles</option><option>Condors</option><option>Falcons</option><option>Ospreys</option>
      <option>Hawks</option><option>Harriers</option><option>Kites</option><option>Vultures</option>
    </select>
  </label><br>

  <label>Quarter:
    <select id="quarter">
      <option>Q1</option><option>Q2</option><option>Q3</option><option>Q4</option>
    </select>
  </label>
</div>

<div class="controls">
  <button onclick="startGame()">Start Game</button>
  <button onclick="pauseGame()">Pause Game</button>
  <button onclick="stopGame()">End Game</button>
  <div id="timer">00:00</div>
</div>

<div class="teams">
  <button id="whiteBtn" onclick="setPossession('White')">WHITE</button>
  <button id="darkBtn" onclick="setPossession('Dark')">DARK</button>
  <div>Current Possession: <span id="currentPossession">None</span></div>
</div>

<div class="direction">
  <p><strong>White Team Direction:</strong></p>
  <button id="dirL2R" onclick="setDirection('left-to-right')">White: Left to Right</button>
  <button id="dirR2L" onclick="setDirection('right-to-left')">White: Right to Left</button>
  <div>Current Direction: <span id="currentDirection">None</span></div>
</div>

<h3>Click Pool Zone:</h3>
<div class="grid">
  <div class="zone" id="zone1" onclick="setZone(1)">Zone 1</div>
  <div class="zone" id="zone2" onclick="setZone(2)">Zone 2</div>
  <div class="zone" id="zone3" onclick="setZone(3)">Zone 3</div>
  <div class="zone" id="zone4" onclick="setZone(4)">Zone 4</div>
  <div class="zone" id="zone5" onclick="setZone(5)">Zone 5</div>
  <div class="zone" id="zone6" onclick="setZone(6)">Zone 6</div>
</div>

<script>
  let possession = null;
  let direction = null;
  let currentZone = null;
  let timer = null;
  let seconds = 0;

  const stats = {
    White: { possession: 0, attack: 0 },
    Dark: { possession: 0, attack: 0 },
    Neutral: 0
  };

  function formatTime(secs) {
    const m = String(Math.floor(secs / 60)).padStart(2, '0');
    const s = String(secs % 60).padStart(2, '0');
    return `${m}:${s}`;
  }

  function updateTimer() {
    seconds++;
    document.getElementById("timer").innerText = formatTime(seconds);
    updateStats();
  }

  function startGame() {
    if (!timer) timer = setInterval(updateTimer, 1000);
  }

  function pauseGame() {
    clearInterval(timer);
    timer = null;
  }

  function stopGame() {
    clearInterval(timer);
    timer = null;
  }

  function setPossession(team) {
    possession = team;
    document.getElementById("currentPossession").innerText = team;
    document.getElementById("whiteBtn").classList.toggle("active", team === 'White');
    document.getElementById("darkBtn").classList.toggle("active", team === 'Dark');
  }

  function setDirection(dir) {
    direction = dir;
    const text = dir === 'left-to-right' ? 'Left → Right' : 'Right ← Left';
    document.getElementById("dirL2R").classList.toggle("active", dir === 'left-to-right');
    document.getElementById("dirR2L").classList.toggle("active", dir === 'right-to-left');
    document.getElementById("currentDirection").innerText = text;
  }

  function setZone(zone) {
    currentZone = zone;
    for (let i = 1; i <= 6; i++) {
      document.getElementById(`zone${i}`).classList.remove("active");
    }
    document.getElementById(`zone${zone}`).classList.add("active");
  }

  function updateStats() {
    if (!possession || !direction || !currentZone) return;

    const attackingZones = direction === 'left-to-right'
      ? { White: [4, 5, 6], Dark: [1, 2, 3] }
      : { White: [1, 2, 3], Dark: [4, 5, 6] };

    stats[possession].possession += 1;

    if ([2, 5].includes(currentZone)) {
      stats.Neutral += 1;
    } else {
      if (attackingZones[possession].includes(currentZone)) {
        stats[possession].attack += 1;
      }
    }

    const totalTime = stats.White.possession + stats.Dark.possession;
    const totalTerritory = stats.White.attack + stats.Dark.attack + stats.Neutral;

    const whitePoss = totalTime ? Math.round((stats.White.possession / totalTime) * 100) : 0;
    const darkPoss = totalTime ? Math.round((stats.Dark.possession / totalTime) * 100) : 0;

    const whiteTerr = totalTerritory ? Math.round((stats.White.attack / totalTerritory) * 100) : 0;
    const darkTerr = totalTerritory ? Math.round((stats.Dark.attack / totalTerritory) * 100) : 0;
    const neutralTerr = totalTerritory ? 100 - whiteTerr - darkTerr : 0;

    document.getElementById("liveStats").innerText =
      `White Team: Poss ${whitePoss}% | Terr ${whiteTerr}% — Dark Team: Poss ${darkPoss}% | Terr ${darkTerr}% — Neutral: ${neutralTerr}%`;
  }
</script>

</body>
</html>
